<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:type" content="website">
    <link rel="icon" href="/assets/images/tads-favicon.png" type="image/png">
    <link rel="stylesheet" type="text/css"
                           href="/assets/css/styles.css">
    <title>docs-adv3-doc-libref-object-topicdatabase-html</title>
    <meta property="og:title" content=
    "docs-adv3-doc-libref-object-topicdatabase-html">
    <meta name="description" content="">
    <meta property="og:description" content="">
</head>
<header><div class="header-search">
    <form class="header-search-form" action="/search/" method="get">
      <input type="text" id="search-box" name="query">
      <input type="submit" value="search">
    </form>
  </div>  </header>
<body>
<main id="content">
<p><span class="title">TopicDatabase</span><span class="type">class</span></p>

<p><a href="../file/actor.t.html">actor.t</a>[<a href="../source/actor.t.html#551">551</a>]</p>

<p><a href="#_SuperClassTree_">Superclass<br />
Tree</a></p>

<p><a href="#_SubClassTree_">Subclass<br />
Tree</a></p>

<p><a href="#_ObjectSummary_">Global<br />
Objects</a></p>

<p><a href="#_PropSummary_">Property<br />
Summary</a></p>

<p><a href="#_MethodSummary_">Method<br />
Summary</a></p>

<p><a href="#_Properties_">Property<br />
Details</a></p>

<p><a href="#_Methods_">Method<br />
Details</a></p>

<div class="fdesc">

A plug-in topic database. The topic database is a set of TopicEntry
objects that specify the responses to queries on particular topics. The
exact nature of the queries that a particular topic database handles is
up to the database subclass to define; we just provide the abstract
mechanism for finding and displaying responses.

This is a "plug-in" database in that it's meant to be added into other
classes using multiple inheritance. This isn't meant to be used as a
stand-alone abstract topic entry container.

`class `**`TopicDatabase`**` :   object`

</div>

<p><span id="_SuperClassTree_"></span></p>

<div class="mjhd">

<span class="hdln">Superclass Tree</span>   (in declaration order)

</div>

<p><strong><code class="language-plaintext highlighter-rouge">TopicDatabase</code></strong><br />
`         object`<br />
<span id="_SubClassTree_"></span></p>

<div class="mjhd">

<span class="hdln">Subclass Tree</span>  

</div>

<p><strong><code class="language-plaintext highlighter-rouge">TopicDatabase</code></strong><br />
`         <code class="language-plaintext highlighter-rouge">[</code>ActorTopicDatabase<code class="language-plaintext highlighter-rouge">](../object/ActorTopicDatabase.html)  
</code>                 <code class="language-plaintext highlighter-rouge">[</code>Actor<code class="language-plaintext highlighter-rouge">](../object/Actor.html)  
</code>                         <code class="language-plaintext highlighter-rouge">[</code>UntakeableActor<code class="language-plaintext highlighter-rouge">](../object/UntakeableActor.html)  
</code>                                 <code class="language-plaintext highlighter-rouge">[</code>Person<code class="language-plaintext highlighter-rouge">](../object/Person.html)  
</code>                 <code class="language-plaintext highlighter-rouge">[</code>ActorState<code class="language-plaintext highlighter-rouge">](../object/ActorState.html)  
</code>                         <code class="language-plaintext highlighter-rouge">[</code>AccompanyingInTravelState<code class="language-plaintext highlighter-rouge">](../object/AccompanyingInTravelState.html)  
</code>                                 <code class="language-plaintext highlighter-rouge">[</code>GuidedInTravelState<code class="language-plaintext highlighter-rouge">](../object/GuidedInTravelState.html)  
</code>                         <code class="language-plaintext highlighter-rouge">[</code>AccompanyingState<code class="language-plaintext highlighter-rouge">](../object/AccompanyingState.html)  
</code>                                 <code class="language-plaintext highlighter-rouge">[</code>GuidedTourState<code class="language-plaintext highlighter-rouge">](../object/GuidedTourState.html)  
</code>                         <code class="language-plaintext highlighter-rouge">[</code>ConversationReadyState<code class="language-plaintext highlighter-rouge">](../object/ConversationReadyState.html)  
</code>                         <code class="language-plaintext highlighter-rouge">[</code>HermitActorState<code class="language-plaintext highlighter-rouge">](../object/HermitActorState.html)  
</code>                         <code class="language-plaintext highlighter-rouge">[</code>InConversationState<code class="language-plaintext highlighter-rouge">](../object/InConversationState.html)  
</code>                 <code class="language-plaintext highlighter-rouge">[</code>ConvNode<code class="language-plaintext highlighter-rouge">](../object/ConvNode.html)  
</code>         <code class="language-plaintext highlighter-rouge">[</code>Consultable`](../object/Consultable.html)<br />
<span id="_ObjectSummary_"></span></p>

<div class="mjhd">

<span class="hdln">Global Objects</span>  

</div>

<p><em>(none)</em> <span id="_PropSummary_"></span></p>

<div class="mjhd">

<span class="hdln">Summary of Properties</span>  

</div>

<p>` <code class="language-plaintext highlighter-rouge">[</code>limitSuggestions<code class="language-plaintext highlighter-rouge">](#limitSuggestions)</code>  <code class="language-plaintext highlighter-rouge">[</code>suggestedTopics<code class="language-plaintext highlighter-rouge">](#suggestedTopics)</code>  <code class="language-plaintext highlighter-rouge">[</code>topicGroupActive<code class="language-plaintext highlighter-rouge">](#topicGroupActive)</code>  <code class="language-plaintext highlighter-rouge">[</code>topicGroupScoreAdjustment<code class="language-plaintext highlighter-rouge">](#topicGroupScoreAdjustment)</code>  `</p>

<p><span id="_MethodSummary_"></span></p>

<div class="mjhd">

<span class="hdln">Summary of Methods</span>  

</div>

<p>` <code class="language-plaintext highlighter-rouge">[</code>addSuggestedTopic<code class="language-plaintext highlighter-rouge">](#addSuggestedTopic)</code>  <code class="language-plaintext highlighter-rouge">[</code>addTopic<code class="language-plaintext highlighter-rouge">](#addTopic)</code>  <code class="language-plaintext highlighter-rouge">[</code>addTopicToList<code class="language-plaintext highlighter-rouge">](#addTopicToList)</code>  <code class="language-plaintext highlighter-rouge">[</code>compareVocabMatch<code class="language-plaintext highlighter-rouge">](#compareVocabMatch)</code>  <code class="language-plaintext highlighter-rouge">[</code>findTopicResponse<code class="language-plaintext highlighter-rouge">](#findTopicResponse)</code>  <code class="language-plaintext highlighter-rouge">[</code>getTopicOwner<code class="language-plaintext highlighter-rouge">](#getTopicOwner)</code>  <code class="language-plaintext highlighter-rouge">[</code>handleTopic<code class="language-plaintext highlighter-rouge">](#handleTopic)</code>  <code class="language-plaintext highlighter-rouge">[</code>removeSuggestedTopic<code class="language-plaintext highlighter-rouge">](#removeSuggestedTopic)</code>  <code class="language-plaintext highlighter-rouge">[</code>removeTopic<code class="language-plaintext highlighter-rouge">](#removeTopic)</code>  <code class="language-plaintext highlighter-rouge">[</code>removeTopicFromList<code class="language-plaintext highlighter-rouge">](#removeTopicFromList)</code>  <code class="language-plaintext highlighter-rouge">[</code>showSuggestedTopicList<code class="language-plaintext highlighter-rouge">](#showSuggestedTopicList)</code>  <code class="language-plaintext highlighter-rouge">[</code>showTopicResponse<code class="language-plaintext highlighter-rouge">](#showTopicResponse)</code>  `</p>

<p><span id="_Properties_"></span></p>

<div class="mjhd">

<span class="hdln">Properties</span>  

</div>

<p><span id="limitSuggestions"></span></p>

<p><code class="language-plaintext highlighter-rouge">limitSuggestions</code></p>

<p><a href="../file/actor.t.html">actor.t</a>[<a href="../source/actor.t.html#911">911</a>]</p>

<div class="desc">

Flag: this database level should limit topic suggestions (for the TOPICS
and TALK TO commands) to its own topics, excluding any topics inherited
from the "broader" context. If this property is set to true, then we
won't include suggestions from any lower level of the database
hierarchy. If this property is nil, we'll also include any topic
suggestions from the broader context.

Topic databases are arranged into a fixed hierarchy for an actor. At the
top level is the current ConvNode object; at the next level is the
ActorState; and at the bottom level is the Actor itself. So, if the
ConvNode's limitSuggestions property is set to true, then the
suggestions for the actor will include ONLY the ConvNode. If the
ConvNode has the property set to nil, but the ActorState has it set to
true, then we'll include the ConvNode and the ActorState suggestions.

By default, we set this to nil. This should usually be set to true for
any ConvNode or ActorState where the NPC won't allow the player to stray
from the subject. For example, if a ConvNode only accepts a YES or NO
response to a question, then this property should probably be set to
true in the ConvNode, since other suggested topics won't be accepted as
conversation topics as long as the ConvNode is active.

</div>

<p><span id="suggestedTopics"></span></p>

<p><code class="language-plaintext highlighter-rouge">suggestedTopics</code></p>

<p><a href="../file/actor.t.html">actor.t</a>[<a href="../source/actor.t.html#975">975</a>]</p>

<div class="desc">

Our list of suggested topics. These are SuggestedTopic objects that
describe things that another actor wants to ask or tell this actor
about.

</div>

<p><span id="topicGroupActive"></span></p>

<p><code class="language-plaintext highlighter-rouge">topicGroupActive</code></p>

<p><a href="../file/actor.t.html">actor.t</a>[<a href="../source/actor.t.html#557">557</a>]</p>

<div class="desc">

Is the topic group active? A TopicEntry always checks with its container
to see if the children of the container are active. By default,
everything in the database is active.

</div>

<p><span id="topicGroupScoreAdjustment"></span></p>

<p><code class="language-plaintext highlighter-rouge">topicGroupScoreAdjustment</code></p>

<p><a href="../file/actor.t.html">actor.t</a>[<a href="../source/actor.t.html#564">564</a>]</p>

<div class="desc">

Get the score adjustment for all topic entries contained within. The
default adjustment is zero; TopicGroup objects can use this to adjust
the score for their nested entries.

</div>

<p><span id="_Methods_"></span></p>

<div class="mjhd">

<span class="hdln">Methods</span>  

</div>

<p><span id="addSuggestedTopic"></span></p>

<p><code class="language-plaintext highlighter-rouge">addSuggestedTopic (topic)</code></p>

<p><a href="../file/actor.t.html">actor.t</a>[<a href="../source/actor.t.html#934">934</a>]</p>

<div class="desc">

add a suggested topic

</div>

<p><span id="addTopic"></span></p>

<p><code class="language-plaintext highlighter-rouge">addTopic (topic)</code></p>

<p><a href="../file/actor.t.html">actor.t</a>[<a href="../source/actor.t.html#918">918</a>]</p>

<div class="desc">

Add a topic to our topic database. We'll add it to the appropriate list
or lists as indicated in the topic itself. 'topic' is a TopicEntry
object.

</div>

<p><span id="addTopicToList"></span></p>

<p><code class="language-plaintext highlighter-rouge">addTopicToList (topic, listProp)</code></p>

<p><a href="../file/actor.t.html">actor.t</a>[<a href="../source/actor.t.html#952">952</a>]</p>

<div class="desc">

Add a topic to the given topic list. The topic list is given as a
property point; for example, we'd specify &amp;askTopics to add the topic to
our ASK list.

</div>

<p><span id="compareVocabMatch"></span></p>

<p><code class="language-plaintext highlighter-rouge">compareVocabMatch (a, b)</code></p>

<p><a href="../file/actor.t.html">actor.t</a>[<a href="../source/actor.t.html#810">810</a>]</p>

<div class="desc">

Compare the vocabulary match strengths of two ResolveInfo objects, for
the purposes of breaking ties in topic matching. Uses the usual
comparison/sorting return value conventions: -1 means that a is weaker
than b, 0 means they're equivalent, 1 means a is stronger than b.

</div>

<p><span id="findTopicResponse"></span></p>

<p><code class="language-plaintext highlighter-rouge">findTopicResponse (fromActor, topic, convType, path)</code></p>

<p><a href="../file/actor.t.html">actor.t</a>[<a href="../source/actor.t.html#606">606</a>]</p>

<div class="desc">

find the best response (a TopicEntry object) for the given topic (a
ResolvedTopic object)

</div>

<p><span id="getTopicOwner"></span></p>

<p><code class="language-plaintext highlighter-rouge">getTopicOwner ( )</code></p>

<p><a href="../file/actor.t.html">actor.t</a>[<a href="../source/actor.t.html#985">985</a>]</p>

<div class="desc">

Get the "owner" of the topics in this database. The meaning of "owner"
varies according to the topic database type; for actor topic databases,
for example, this is the actor. Generally, the owner is the object being
queried about the topic, from the player's perspective. Each type of
database should define this method to return the appropriate object.

</div>

<p><span id="handleTopic"></span></p>

<p><code class="language-plaintext highlighter-rouge">handleTopic (fromActor, topic, convType, path)</code></p>

<p><a href="../file/actor.t.html">actor.t</a>[<a href="../source/actor.t.html#572">572</a>]</p>

<div class="desc">

Handle a topic. Look up the topic in our topic list for the given
conversational action type. If we find a match, we'll invoke the
matching topic list entry to handle it. We'll return true if we find a
match, nil if not.

</div>

<p><span id="removeSuggestedTopic"></span></p>

<p><code class="language-plaintext highlighter-rouge">removeSuggestedTopic (topic)</code></p>

<p><a href="../file/actor.t.html">actor.t</a>[<a href="../source/actor.t.html#941">941</a>]</p>

<div class="desc">

remove a suggested topic

</div>

<p><span id="removeTopic"></span></p>

<p><code class="language-plaintext highlighter-rouge">removeTopic (topic)</code></p>

<p><a href="../file/actor.t.html">actor.t</a>[<a href="../source/actor.t.html#926">926</a>]</p>

<div class="desc">

remove a topic from our topic database

</div>

<p><span id="removeTopicFromList"></span></p>

<p><code class="language-plaintext highlighter-rouge">removeTopicFromList (topic, listProp)</code></p>

<p><a href="../file/actor.t.html">actor.t</a>[<a href="../source/actor.t.html#963">963</a>]</p>

<div class="desc">

remove a topic from the given topic list

</div>

<p><span id="showSuggestedTopicList"></span></p>

<p><code class="language-plaintext highlighter-rouge">showSuggestedTopicList (lst, asker, askee, explicit)</code></p>

<p><a href="../file/actor.t.html">actor.t</a>[<a href="../source/actor.t.html#846">846</a>]</p>

<div class="desc">

show our suggested topic list

</div>

<p><span id="showTopicResponse"></span></p>

<p><code class="language-plaintext highlighter-rouge">showTopicResponse (fromActor, topic, resp)</code></p>

<p><a href="../file/actor.t.html">actor.t</a>[<a href="../source/actor.t.html#596">596</a>]</p>

<div class="desc">

show the response we found for a topic

</div>

<div class="ftr">

TADS 3 Library Manual  
Generated on 5/16/2013 from TADS version 3.1.3

</div>

</main>
<footer>
    <p>This is an unofficial informational website to aggregate TADS 3 information and does not claim authorship over, or any rights to, TADS 3 itself. All resources copyright their credited owners. TADS itself is <a href="https://www.tads.org/copyright.htm">Copyright ©2001-2013 Michael J. Roberts</a>.</p>
    <p><a href="/">Back to Homepage</a></p>
</footer>
</body>
</html>